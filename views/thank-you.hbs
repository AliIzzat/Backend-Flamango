<head>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <div style="text-align: center; padding: 1rem;">
    <h2 style="line-height: 0.5rem;">Thank you {{customerName}}</h2>
    <h3>Your Order Summaries</h3>

   <div class="invoice-container">
  {{#each orders}}
    <div class="invoice-box">
      <h3>Invoice –
        {{#if this.restaurant}}{{this.restaurant.restaurant_en}}{{else}}[No Restaurant]{{/if}}
      </h3>

      {{#if this.mealItems}}
        <ul style="list-style-type: none; padding: 0;">
          {{#each this.mealItems}}
            <li><strong>{{this.name}}</strong> ({{this.quantity}})</li>
          {{/each}}
        </ul>
      {{else}}
        <p>No meals found for this restaurant.</p>
      {{/if}}

      <p><strong>Total:</strong> QAR {{this.totalPrice}}</p>
        {{#unless this.isPaid}}
          <a href="/order/payment/start/{{this._id}}" class="centered-button" style="width: 6rem;height:2rem;text-decoration: none;margin: .6rem auto 0;padding: .3rem 0.3rem;">Pay Now</a>
        {{else}}
          <div class="paid-badge">✅ Paid</div>
        {{/unless}}
    </div>
  {{/each}}
</div>
    {{#if coordinates}}
      <div style="margin-top: 1rem;">
        <iframe
          width="90%"
          height="200"
          style="border: 0; border-radius: 8px;"
          loading="lazy"
          allowfullscreen
        ></iframe>
      </div>
    {{/if}}
  </div>
  <div id="map" style="width:100%; height:320px; border-radius:8px; margin:12px 0;"></div>
  <!-- Toast Container: TOP LEFT -->
  <div
    id="toast"
    style="display:none; position:fixed; top:20px; left:20px; background:#fff; color:#d32f2f;
            padding:10px 16px; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,0.3); z-index:9999;"
  >
  </div>
  <script>
    function showToast(message)
    {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.style.display = "block";
      setTimeout(() =>
      toast.style.display ="none", 10000);
      } // ✅ Show immediately on page load
       window.addEventListener("load", () => { showToast("⚠️Do not go back- you will loss your Cart content.");
       });
  </script>
  <script>
document.addEventListener('click', e => {
  const btn = e.target.closest('button.checkout-btn');
  if (!btn) return;
  const f = btn.closest('form');
  console.log('Submitting orderId =', new FormData(f).get('orderId'));
  f.submit();
});
</script>

</body>